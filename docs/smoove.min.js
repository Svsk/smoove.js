jQuery.fn.extend({smoove:function(t,e){function i(){return t.element.find("["+t.itemCategoryAttribute+"]")}function r(e){for(var r=i(),n=$([]),o=0;o<r.length;o++)for(var a=$(r[o]).attr(t.itemCategoryAttribute).split(";"),s=0;s<a.length;s++)if(a[s]===e){n=$(n).add($(r[o]));break}return n}function n(t){var e=$(t).clone(),i=o(t);return $(t).parent().append(e),e.css({position:"absolute",top:i.top,left:i.left,height:i.height,width:i.width}),e}function o(t){var e=$(t),i=e[0].getBoundingClientRect(),r=parseInt(e.css("margin-left").replace("px","")),n=e.css("box-sizing"),o=0,a=0;if("border-box"!==n){var s=parseInt(e.css("padding-left").replace("px","")),l=parseInt(e.css("padding-top").replace("px","")),p=parseInt(e.css("padding-right").replace("px","")),c=parseInt(e.css("padding-bottom").replace("px","")),d=parseInt(e.css("border-left-width").replace("px","")),f=parseInt(e.css("border-top-width").replace("px","")),h=parseInt(e.css("border-right-width").replace("px","")),g=parseInt(e.css("border-bottom-width").replace("px",""));o-=s+p+(d+h),a-=l+c+(f+g)}var u={top:i.top+$(window).scrollTop()-r,left:i.left+$(window).scrollLeft()-r,width:i.width+o,height:i.height+a};return u}var a=$(t.filterControllerSelector),s=$(this);t.element=s,a.on("click",function(){if($hits=[],"multifilter"===t.mode){var a=$(t.filterControllerSelector+":checked");0===a.length&&(a="ALL");var s=i(),l=$([]);if("ALL"===a)l=l.add(t.element.find("["+t.itemCategoryAttribute+"]"));else for(var p=0;p<a.length;p++){var c=$(a[p]).attr(t.filterControllerCategoryAttribute),d=r(c);l=l.add(d)}var f=s.not(l),h=l.not(":hidden"),g=l.not(":visible"),u=[];h.each(function(){u.push({original:$(this),clone:n($(this))}),$(this).css("visibility","hidden")}),g.css("opacity","0"),g.css("display","");var v=0;f.fadeOut().promise().done(function(){for(var i=0;i<u.length;i++){var r=u[i].clone,n=u[i].original,a=o(n);r.data("original",n),r.animate({top:a.top,left:a.left},{queue:!1}).promise().done(function(){$(this).data("original").css("visibility","visible"),$(this).remove(),g.animate({opacity:"1"},{queue:!1}),v++,v===u.length&&"function"==typeof e&&e(t)})}})}})}});