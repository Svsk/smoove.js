jQuery.fn.extend({smoove:function(t,e){function i(){return t.element.find("["+t.itemCategoryAttribute+"]")}function r(e){for(var r=i(),n=$([]),o=0;o<r.length;o++)for(var a=$(r[o]).attr(t.itemCategoryAttribute).split(";"),s=0;s<a.length;s++)if(a[s]===e){n=$(n).add($(r[o]));break}return n}function n(t){var e=$(t).clone(),i=o(t);return $(t).parent().append(e),e.css({position:"absolute",top:i.top,left:i.left,height:i.height,width:i.width}),e}function o(t){var e=$(t),i=e[0].getBoundingClientRect(),r=parseInt(e.css("margin-left").replace("px","")),n=e.css("box-sizing"),o=0,a=0;if("border-box"!==n){var s=parseInt(e.css("padding-left").replace("px","")),l=parseInt(e.css("padding-top").replace("px","")),p=parseInt(e.css("padding-right").replace("px","")),c=parseInt(e.css("padding-bottom").replace("px","")),d=parseInt(e.css("border-left-width").replace("px","")),f=parseInt(e.css("border-top-width").replace("px","")),h=parseInt(e.css("border-right-width").replace("px","")),g=parseInt(e.css("border-bottom-width").replace("px",""));o-=s+p+(d+h),a-=l+c+(f+g)}var u={top:i.top+$(window).scrollTop()-r,left:i.left+$(window).scrollLeft()-r,width:i.width+o,height:i.height+a};return u}var a="["+t.filterControllerCategoryAttribute+"]",s=$(a),l=$(this);t.element=l,s.on("click",function(){if($hits=[],"multifilter"===t.mode){var s=$(a+":checked");0===s.length&&(s="ALL");var l=i(),p=$([]);if("ALL"===s)p=p.add(t.element.find("["+t.itemCategoryAttribute+"]"));else for(var c=0;c<s.length;c++){var d=$(s[c]).attr(t.filterControllerCategoryAttribute),f=r(d);p=p.add(f)}var h=l.not(p),g=p.not(":hidden"),u=p.not(":visible"),v=[];g.each(function(){v.push({original:$(this),clone:n($(this))}),$(this).css("visibility","hidden")}),u.css("opacity","0"),u.css("display","");var b=0;h.fadeOut().promise().done(function(){for(var i=0;i<v.length;i++){var r=v[i].clone,n=v[i].original,a=o(n);r.data("original",n),r.animate({top:a.top,left:a.left},{queue:!1}).promise().done(function(){$(this).data("original").css("visibility","visible"),$(this).remove(),u.animate({opacity:"1"},{queue:!1}),b++,b===v.length&&"function"==typeof e&&e(t)})}})}})}});